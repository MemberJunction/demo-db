-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Query Fields
-- Item: spCreateQueryField
-- Generated: 3/10/2024, 9:38:22 AM
--
-- This was generated by the Entity Generator.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------

------------------------------------------------------------
----- CREATE PROCEDURE FOR QueryField
------------------------------------------------------------
DROP PROCEDURE IF EXISTS [__mj].[spCreateQueryField]
GO

CREATE PROCEDURE [__mj].[spCreateQueryField]
    @QueryID int,
    @Name nvarchar(255),
    @Description nvarchar(MAX),
    @Sequence int,
    @SQLBaseType nvarchar(50),
    @SQLFullType nvarchar(100),
    @SourceEntityID int,
    @SourceFieldName nvarchar(255),
    @IsComputed bit,
    @ComputationDescription nvarchar(MAX),
    @IsSummary bit,
    @SummaryDescription nvarchar(MAX)
AS
BEGIN
    SET NOCOUNT ON;
    
    INSERT INTO 
    [__mj].[QueryField]
        (
            [QueryID],
            [Name],
            [Description],
            [Sequence],
            [SQLBaseType],
            [SQLFullType],
            [SourceEntityID],
            [SourceFieldName],
            [IsComputed],
            [ComputationDescription],
            [IsSummary],
            [SummaryDescription]
        )
    VALUES
        (
            @QueryID,
            @Name,
            @Description,
            @Sequence,
            @SQLBaseType,
            @SQLFullType,
            @SourceEntityID,
            @SourceFieldName,
            @IsComputed,
            @ComputationDescription,
            @IsSummary,
            @SummaryDescription
        )
    -- return the new record from the base view, which might have some calculated fields
    SELECT * FROM [__mj].[vwQueryFields] WHERE [ID] = SCOPE_IDENTITY()
END
GO
GRANT EXECUTE ON [__mj].[spCreateQueryField] TO [cdp_Developer], [cdp_Integration]
